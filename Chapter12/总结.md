12.9 总结

用于存储程序数据的内存可用**存储时期、作用域和链接**来表征。存储时期可以是**静态的、自动的或者分配的**。如果是静态的，内存在程序开始执行时被分配，并在程序运行时一直存在。如果是**自动的**，变量所用的内存在程序执行到该 变量定义所在的代码块时开始分配 ，在退出代码块时释放。如果是**分配的**内存，内存通过调用**_malloc()_分配**，通过调用**函数_free()_**释放。

**作用域**决定了哪一部分程序可以访问某个数据。在所有函数之外定义的变量具有**文件作用域**，并对该变量声明之后定义的全部函数可见。在**代码块内定义或者作为函数参量**定义的变量具有**代码块作用域**，并只在**该代码块及其子代码块**中可见。

**链接**描述了程序的**某个单元定义的变量**可被**链接**到其他哪些地方。具有代码块作用域的变量作为**局部变量**，具有**空链接**。具有**文件作用域**的变量可有_**内部链接或外部链接**_。内部链接意味着变量**只可在包含**变量定义的文件**内部**使用。**外部链接**意味着变量也可以在**其他文件**中使用。

下面是C的一种存储类：
C的5种存储类

 自动 | 在一个代码块内（或一个函数头部作为参量）声明的变量，无论有没有存储类修饰符auto，都属于自动存储类。该类具有自动存储时期、代码块作用域和空链接。如未经初始化，它的值是不定的。
 :-:|:-
 **寄存器** | **在一个代码块内（或一个函数头部作为参量）使用存储类修饰符register声明的变量属于寄存器存储类。该 类具有自动存储时期、代码块作用域和空链接，并且您无法获得其地址。把一个变量声明为寄存器变量可以指示编译器提供可用的最快访问。如未经初始化，它的值是不定的。**
 **静态、空链接** | **在一个代码块内使用存储类修饰符static声明的变量属于静态空链接存储类。该 类具有静态存储时期、代码块作用域和空链接，仅在编译时初始化一次。如果未经初始化，它的字节都设定为0。**
 **静态、外部链接** | **在所有函数外部定义、未使用存储类修饰符static的变量属于静态、外部链接存储类。该类具有静态存储时期、文件作用域和外部链接，仅在编译时初始化一次。如未经初始化，它的字节都被设为0。**
 **静态、内部链接** | **在所有函数外部定义、使用存储类修饰符static的变量属于静态、内部链接存储类。该 类具有静态存储时期、文件作用域和内部链接，仅在编译时初始化一次。如果明确初始化，它的字节都被设定为0。**

分配内存是使用函数**malloc()**提供的内存，该函数返回一个指向具有所请求字节数的内存块的指针。将这一内存块的地址作为参数来调用**free()**可以使该内存块重新可用。

类型限定词说明符有const、volatile和restrict。说明符const将数据限定为不变的。在使用指针时，const可以表明指针本身不变或指针指向的数据不变，这取决于const在声明 中的位置。说明符volatile表明数据除了可被程序修改外还可以通过其他方式修改，其目的是警示编译器在优化时不要做出相反的假定。说明符restrict也是为了优化而设置。由restrict限定的指针被认为是提供了对其所指向的数据块的惟一访问途径。

表12.1 Page 324 

5种存储类

存储类 | 时期 | 作用域 | 链接 | 声明方式
:-: |:-: |:-: |:-: |:-: |
自动 | 自动 | 代码块 | 空链接 | 代码块内
寄存器 | 自动 | 代码块 | 空链接 | 代码块内，使用关键字register
具有**外部**链接的静态 | 静态 | 文件作用域 | **外部**链接 | 所有函数之外
具有**内部**链接的静态 | 静态 | 文件作用域 | **内部**链接 | 所有函数之外，使用关键字static
空链接的静态 | 静态 | 代码块 | 空链接 | 代码块内，使用关键字static
